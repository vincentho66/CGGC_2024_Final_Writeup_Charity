## Vulnerability Snippets

`flashLoan` function in `Charity` uses the contract's balance to check if the loan has been paid back.

`donate` function will increase CGGC balance of the contract.

In `Charity`, only `donate` is missing `nonReentrant` modifier, which allows the attacker to reentrant to `donate` during the flash loan callback.

The attacker can simply borrow all CGGC tokens using `flashLoan`, and call `donate` in the attack contract's `flashCallback`, which will makes the CGGC balance in `Charity` back to normal, and pass the flash loan payback check.

Finally, based on the donate record and the NFT received, the attacker can withdraw all donated tokens using `withdraw`.

## The Exploit

Things to note:
1. In `flashCallback`, remember to approve `Charity` to transfer the token before calling `donate`.
2. The exploit contract needs to inherit `ERC721Holder` to receive NFT, otherwise the transaction will be reverted.